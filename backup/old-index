import { useEffect, useState } from "react";
import { getCategories } from "~/models/category.server";
import { json } from "@remix-run/node";
import { useLoaderData } from "@remix-run/react";

import Navbar from "~/components/navbar";
import Category from "~/components/category";
import MainContainer from "~/components/maincontainer";
import { getPostsByCategory } from "~/models/post.server";
import { Post } from "@prisma/client";

const text = (
  <div>
    <p className="mb-3">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus pretium
      ex nec leo euismod, sit amet bibendum nibh volutpat. Praesent in leo
      nulla. Donec mollis nisi in erat faucibus dictum. Mauris ullamcorper
      gravida nibh ac pellentesque. Cras vehicula efficitur tortor, a luctus est
      venenatis sit amet. Nunc tempus, dolor id finibus aliquet, elit tortor
      viverra orci, et imperdiet mi justo at massa. Nam sed sem vitae diam
      ullamcorper tincidunt at vel erat.
    </p>
    <p className="mb-3">
      Nam semper tellus vitae sem imperdiet, ut volutpat turpis pellentesque.
      Donec tristique sed ante vel convallis. Ut sagittis fermentum mi. Morbi ac
      enim risus. Cras sem libero, convallis in risus nec, sagittis placerat
      leo. Nullam diam ex, euismod ac dictum sed, ullamcorper id risus. Duis
      egestas magna a risus efficitur aliquam. Praesent eget elementum arcu, eu
      mattis nibh. Maecenas lacinia massa ut arcu tincidunt, in suscipit nibh
      tincidunt. Donec et nunc ipsum. Ut sagittis urna ut lacus posuere
      ultricies. Sed congue mi a metus malesuada, et accumsan velit ornare.
      Maecenas quis mi maximus, volutpat felis nec, euismod quam.
    </p>
    <p className="mb-3">
      Etiam ac enim nisl. Donec vitae eleifend lectus. Aliquam fermentum, mauris
      convallis vestibulum mollis, odio diam suscipit nisi, et molestie sapien
      turpis non eros. Praesent interdum rutrum enim a elementum. Nullam nisl
      quam, lobortis ut sapien sodales, luctus iaculis est. Ut laoreet ipsum
      fermentum sem placerat pellentesque. Fusce vitae condimentum orci. Morbi
      consectetur leo eget odio ullamcorper mattis a at sapien. Integer ornare
      sem dui, non fermentum erat interdum ac.
    </p>
    <p className="mb-3">
      Praesent porttitor ipsum tellus, ut ornare libero pulvinar gravida. Cras
      ante sapien, elementum a est at, pretium consectetur urna. Mauris
      condimentum, ipsum at pulvinar tempor, sem magna sagittis neque, sed
      finibus mauris ligula sed elit. Curabitur vel orci ut velit maximus
      scelerisque. Morbi a turpis ante. Aliquam id consectetur leo. Nulla nec
      dictum tortor, id tristique quam. Sed elementum magna dolor, et varius
      justo aliquet eget. Quisque non ex convallis, vulputate lorem eu,
      convallis nisi. Praesent vel eleifend leo. Sed non lorem urna. Vestibulum
      sollicitudin ligula at luctus ornare. Suspendisse id nunc id felis euismod
      blandit. Phasellus vitae nisl accumsan, condimentum nisi at, volutpat
      velit. Etiam vel dictum purus, nec fermentum nisl. Etiam non viverra
      nulla.
    </p>
    <p className="mb-3">
      Nulla lobortis iaculis nunc, vitae consequat lacus iaculis quis. Cras eget
      ultrices mi. Nam nec egestas elit. Sed tellus ipsum, auctor vel nibh sed,
      convallis tristique nunc. In interdum pharetra mi, in egestas massa
      lobortis quis. Vestibulum ultricies at enim eu congue. Duis laoreet
      viverra pharetra. Maecenas placerat quis urna quis volutpat. Vivamus quis
      mattis neque. Duis scelerisque nisl neque, eu aliquet orci imperdiet
      vitae. Duis sollicitudin, nisl et sollicitudin efficitur, ligula quam
      efficitur nunc, nec maximus mauris mauris et ipsum. Ut tristique, dui
      eleifend porttitor mollis, tortor est laoreet dolor, ac porta risus sem
      vitae nulla. Suspendisse quis scelerisque mauris. Donec mattis quis erat
      id ullamcorper.
    </p>
  </div>
);

export const loader = async () => {
  const categories = await getCategories();

  return json({ categories });
};

export default function Index() {
  const { categories } = useLoaderData<typeof loader>();

  const [sideColumn, setSideColumn] = useState(1);
  const [btnSelected, setBtnSelected] = useState(null);

  const handleClick = async (e: any) => {
    setSideColumn(2);
    setBtnSelected(e.target.value);
  };

  const body1 = (
    <div className="flex flex-column">
      <div className="w-1/5">
        {categories.map((category) => (
          <Category
            key={category.slug}
            name={category.title}
            onclick={handleClick}
            slug={category.slug}
          />
        ))}
      </div>
      <div className="w-4/5">
        <div className="grid row-2 w-full">
          <div className="text-center text-4xl w-full py-4 px-12">
            <div className="text-2xl font-medium text-center border-b-2 p-2">
              Title
            </div>
          </div>
          <div className="py-4 px-12 text-justify">{text}</div>
        </div>
      </div>
    </div>
  );

  const body2 = (
    <div className="flex flex-column">
      <div className="w-1/6">
        {categories.map((category) => (
          <Category
            key={category.slug}
            name={category.title}
            onclick={handleClick}
            slug={category.slug}
          />
        ))}
      </div>
      <div className="w-1/6">
        <Category name={btnSelected + "-2"} />
        <Category name={btnSelected + "-3"} />
        <Category name={btnSelected + "-4"} />
      </div>
      <div className="w-4/6">
        <div className="grid row-2 w-full">
          <div className="text-center text-4xl w-full py-4 px-12">
            <div className="text-2xl font-medium text-center border-b-2 p-2">
              Title
            </div>
          </div>
          <div className="py-4 px-12 text-justify">{text}</div>
        </div>
      </div>
    </div>
  );

  useEffect(() => {}, [sideColumn, btnSelected]);

  return (
    <MainContainer>
      <Navbar />
      {sideColumn === 1 ? body1 : body2}
    </MainContainer>
  );
}
